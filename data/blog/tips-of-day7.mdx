---
title: 'پی جی وکتور (pgvector): مقدمه، نصب و کاربردها'
date: '2024-01-01 7:00'
lastmod: '2024-01-01'
tags: ['devops', 'PostgreSQL']
draft: false
summary: ''
images: []
---

**pgvector** یک افزونه‌ی متن‌باز برای پایگاه داده PostgreSQL است که قابلیت مدیریت داده‌های برداری (Vector Data) را فراهم می‌کند. این افزونه برای کاربردهایی طراحی شده که نیاز به ذخیره‌سازی و جستجوی بردارهای چندبعدی دارند. با استفاده از این ابزار می‌توان عملیات جستجوی مشابهت (Similarity Search) را به طور کارآمد انجام داد.

---

### **بردارها چیستند و چرا به آن‌ها نیاز داریم؟**

در حوزه یادگیری ماشین، پردازش زبان طبیعی (NLP) و بینایی کامپیوتر، داده‌ها اغلب به صورت بردارهای چندبعدی (embeddings) نمایش داده می‌شوند. برای مثال:

- یک متن می‌تواند به یک بردار عددی که معنای آن را در فضای چندبعدی نشان می‌دهد، تبدیل شود.
- تصاویر نیز می‌توانند به بردارهایی که ویژگی‌های بصری آن‌ها را نمایش می‌دهند، تبدیل شوند.

این نمایش برداری امکان جستجو، مقایسه و تحلیل داده‌ها را به‌صورت دقیق و سریع فراهم می‌کند. **pgvector** ابزاری است که این نیاز را به‌خوبی برطرف می‌کند.

---

### **ویژگی‌های pgvector**

1. **ذخیره‌سازی بردارها:**

   - پشتیبانی از بردارهای فشرده (Dense) و پراکنده (Sparse).
   - پشتیبانی از انواع متریک‌های فاصله، از جمله فاصله اقلیدسی (L2)، کسینوس (Cosine) و ضرب داخلی (Inner Product).

2. **جستجوی مشابهت:**

   - امکان یافتن نزدیک‌ترین همسایه‌ها (Nearest Neighbors) برای بردارها.
   - پشتیبانی از جستجوی دقیق و تقریبی.

3. **اندیس‌گذاری:**

   - پشتیبانی از ساختارهای اندیس مانند HNSW و IVFFlat برای بهبود کارایی جستجو.

4. **کاربردهای گسترده:**
   - مناسب برای سیستم‌های پیشنهاددهی، جستجوی معنایی متن، بازیابی تصاویر و داده‌های صوتی.

---

### **نصب pgvector**

#### **پیش‌نیازها**

- PostgreSQL نسخه 13 یا بالاتر.

#### **مراحل نصب**

1. **نصب PostgreSQL:**
   اگر PostgreSQL روی سیستم شما نصب نیست، آن را نصب کنید. برای مثال، در سیستم‌های اوبونتو:

```bash
   sudo apt update
   sudo apt install postgresql
```

2. **نصب افزونه pgvector:**
   اگر از مدیر بسته `apt` یا `yum` استفاده می‌کنید:

```bash
   sudo apt install postgresql-contrib
```

سپس افزونه pgvector را نصب کنید:

```bash
CREATE EXTENSION vector;
```

3. **نصب از سورس:**
   اگر می‌خواهید pgvector را از سورس نصب کنید:

```bash
   git clone https://github.com/pgvector/pgvector.git
   cd pgvector
   make
   make install
```

4. **فعال‌سازی در پایگاه داده:**
   وارد PostgreSQL شوید و دستور زیر را اجرا کنید:

```sql
   CREATE EXTENSION vector;
```

---

### **مثال‌هایی از استفاده pgvector**

#### **ایجاد جدول بردار**

برای ذخیره‌سازی بردارها، ابتدا باید یک جدول ایجاد کنید:

```sql
CREATE TABLE items (
    id serial PRIMARY KEY,
    embedding vector(3) -- بردار با ابعاد ۳
);
```

#### **اضافه کردن داده**

داده‌ها را می‌توانید به جدول اضافه کنید:

```sql
INSERT INTO items (embedding) VALUES ('[1, 2, 3]');
INSERT INTO items (embedding) VALUES ('[4, 5, 6]');
INSERT INTO items (embedding) VALUES ('[7, 8, 9]');
```

#### **جستجوی نزدیک‌ترین بردار**

برای جستجوی بردارهایی که به یک بردار خاص نزدیک هستند:

```sql
SELECT * FROM items
ORDER BY embedding <-> '[3, 3, 3]'
LIMIT 5;
```

این دستور ۵ بردار نزدیک‌تر به `[3, 3, 3]` را برمی‌گرداند.

#### **اندیس‌گذاری برای بهبود کارایی**

می‌توانید از اندیس‌گذاری HNSW استفاده کنید:

```sql
CREATE INDEX ON items USING hnsw (embedding);
```

---

### **کاربردهای عملی pgvector**

1. **سیستم‌های پیشنهاددهی:**

   - پیشنهاد فیلم، موسیقی یا محصولات براساس بردارهای ترجیح کاربران.

2. **جستجوی معنایی:**

   - بازیابی اسناد مشابه بر اساس معنای آن‌ها.

3. **بازیابی تصاویر و صوت:**

   - یافتن تصاویر یا صداهایی که از نظر ویژگی‌های برداری مشابه هستند.

4. **هوش مصنوعی:**
   - استفاده در مدل‌های یادگیری ماشین برای مدیریت embedding‌ها.

---

### **جمع‌بندی**

**pgvector** ابزاری قدرتمند برای ذخیره‌سازی و جستجوی بردارها در پایگاه داده PostgreSQL است. این ابزار با قابلیت‌های پیشرفته‌ای مانند جستجوی مشابهت، اندیس‌گذاری و پشتیبانی از انواع متریک‌ها، امکان استفاده در پروژه‌های هوش مصنوعی، تحلیل داده و سیستم‌های پیشنهاددهی را فراهم می‌کند.

اگر به دنبال یک راهکار ساده و موثر برای مدیریت بردارها هستید، **pgvector** انتخاب مناسبی خواهد بود. برای اطلاعات بیشتر می‌توانید به [صفحه گیت‌هاب pgvector](https://github.com/pgvector/pgvector) مراجعه کنید.
