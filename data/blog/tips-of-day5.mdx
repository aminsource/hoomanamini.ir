---
title: 'راهنمای نصب PostgreSQL روی اوبونتو و دستورات پرکاربرد'
date: '2024-01-01 5:00'
lastmod: '2024-01-01'
tags: ['devops', 'PostgreSQL']
draft: false
summary: ''
images: []
---

### راهنمای نصب PostgreSQL روی اوبونتو و دستورات پرکاربرد

PostgreSQL یک سیستم مدیریت پایگاه داده متن‌باز و قدرتمند است که برای برنامه‌های حرفه‌ای و حجیم بسیار مناسب است. در این مقاله به نحوه نصب PostgreSQL روی اوبونتو و دستورات پرکاربرد آن خواهیم پرداخت.

---

## **بخش اول: نصب PostgreSQL روی اوبونتو**

### ۱. به‌روزرسانی سیستم

ابتدا مطمئن شوید که سیستم شما به‌روز است:

```bash
sudo apt update
sudo apt upgrade -y
```

### ۲. نصب PostgreSQL

برای نصب PostgreSQL کافی است از مخزن پیش‌فرض اوبونتو استفاده کنید:

```bash
sudo apt install postgresql postgresql-contrib -y
```

### ۳. بررسی وضعیت سرویس PostgreSQL

پس از نصب، سرویس PostgreSQL به‌صورت خودکار شروع می‌شود. برای بررسی وضعیت آن، دستور زیر را اجرا کنید:

```bash
sudo systemctl status postgresql
```

### ۴. شروع و توقف سرویس

- برای شروع سرویس:

```bash
  sudo systemctl start postgresql
```

- برای توقف سرویس:

```bash
  sudo systemctl stop postgresql
```

- برای راه‌اندازی مجدد سرویس:

```bash
  sudo systemctl restart postgresql
```

---

## **بخش دوم: دستورات پرکاربرد PostgreSQL**

### ۱. ورود به محیط PostgreSQL

PostgreSQL به‌طور پیش‌فرض یک کاربر به نام `postgres` ایجاد می‌کند. برای ورود به محیط تعاملی، دستور زیر را اجرا کنید:

```bash
sudo -i -u postgres
psql
```

### ۲. ایجاد یک پایگاه داده

برای ایجاد یک پایگاه داده جدید:

```sql
CREATE DATABASE mydatabase;
```

### ۳. ایجاد یک کاربر

برای ایجاد یک کاربر جدید با رمز عبور:

```sql
CREATE USER myuser WITH PASSWORD 'mypassword';
```

### ۴. تخصیص دسترسی‌ها به کاربر

برای دادن دسترسی‌های کامل به کاربر روی یک پایگاه داده:

```sql
GRANT ALL PRIVILEGES ON DATABASE mydatabase TO myuser;
```

### ۵. نمایش پایگاه داده‌ها

برای مشاهده لیست پایگاه داده‌ها:

```sql
\l
```

### ۶. تغییر پایگاه داده

برای اتصال به یک پایگاه داده خاص:

```sql
\c mydatabase
```

### ۷. نمایش جداول

برای مشاهده لیست جداول موجود در پایگاه داده جاری:

```sql
\dt
```

### ۸. خروج از محیط PostgreSQL

برای خروج از محیط تعاملی:

```sql
\q
```

---

## **بخش سوم: پیکربندی و تنظیمات پیشرفته**

### تغییر پورت پیش‌فرض

فایل تنظیمات PostgreSQL را ویرایش کنید:

```bash
sudo nano /etc/postgresql/14/main/postgresql.conf
```

پورت پیش‌فرض را (معمولاً 5432) به مقدار دلخواه تغییر دهید.

### تنظیم دسترسی‌های شبکه

فایل `pg_hba.conf` را برای اجازه دسترسی از راه دور ویرایش کنید:

```bash
sudo nano /etc/postgresql/14/main/pg_hba.conf
```

مثال برای اجازه دسترسی از هر آدرس IP:

```
host    all             all             0.0.0.0/0               md5
```

سپس فایل تنظیمات `postgresql.conf` را تغییر دهید تا PostgreSQL روی همه آدرس‌ها گوش دهد:

```bash
listen_addresses = '*'
```

### اعمال تغییرات

برای اعمال تغییرات، سرویس PostgreSQL را مجدداً راه‌اندازی کنید:

```bash
sudo systemctl restart postgresql
```

---

## **بخش چهارم: دستورات پرکاربرد مدیریتی**

### پشتیبان‌گیری از پایگاه داده

برای گرفتن بک‌آپ:

```bash
pg_dump mydatabase > mydatabase_backup.sql
```

### بازیابی پشتیبان

برای بازیابی بک‌آپ:

```bash
psql mydatabase < mydatabase_backup.sql
```

### حذف پایگاه داده

برای حذف یک پایگاه داده:

```sql
DROP DATABASE mydatabase;
```

### حذف کاربر

برای حذف یک کاربر:

```sql
DROP USER myuser;
```

---

## **جمع‌بندی**

PostgreSQL یک ابزار قدرتمند برای مدیریت پایگاه داده است که انعطاف‌پذیری و عملکرد بالایی را فراهم می‌کند. با استفاده از این راهنما می‌توانید PostgreSQL را روی اوبونتو نصب کرده و با دستورات اصلی آن کار کنید. اگر سؤال یا مشکلی داشتید، حتماً مطرح کنید!
